# Story 9.4: Ứng tuyển trực tuyến

## Epic
Tìm kiếm & Ứng tuyển Nâng cao

## Mô tả
**Là một** Ứng viên, **tôi muốn** ứng tuyển trực tiếp vào tin tuyển dụng bằng cách sử dụng CV đã tải lên của tôi, **để** quá trình ứng tuyển diễn ra nhanh chóng và tiện lợi.

## Tiêu chí chấp nhận (Acceptance Criteria)
1.  Ứng viên phải có thể xem chi tiết một tin tuyển dụng.
2.  Trên trang chi tiết tin tuyển dụng, ứng viên phải thấy nút "Ứng tuyển ngay" hoặc "Apply Now".
3.  Khi nhấp vào nút "Ứng tuyển ngay", hệ thống sẽ hiển thị danh sách các CV đã tải lên của ứng viên để lựa chọn.
4.  Ứng viên có thể chọn một trong các CV của mình để gửi kèm hồ sơ ứng tuyển.
5.  Sau khi chọn CV và xác nhận, hệ thống phải ghi nhận việc ứng tuyển thành công.
6.  Ứng viên phải nhận được thông báo xác nhận đã ứng tuyển thành công.
7.  Nhà tuyển dụng sẽ nhận được thông báo về hồ sơ ứng tuyển mới.

## Nhiệm vụ (Tasks)

-   **Backend:**
    -   **[Database]** Thiết kế và tạo bảng mới `job_applications` để lưu trữ thông tin ứng tuyển (ví dụ: `user_id`, `cv_id`, `job_description_id`, `applied_at`, `status`).
    -   **[API]** Xây dựng API endpoint `POST /api/v1/jobs/{job_id}/apply` để ghi nhận hồ sơ ứng tuyển. Endpoint này sẽ nhận vào `cv_id` mà ứng viên chọn.
    -   **[Logic]** Triển khai logic trong service layer để:
        -   Xác nhận `job_id` và `cv_id` hợp lệ và thuộc về người dùng hiện tại.
        -   Tạo một bản ghi `job_application` mới.
        -   Gửi thông báo đến nhà tuyển dụng về hồ sơ ứng tuyển mới (ví dụ: qua email hoặc hệ thống thông báo nội bộ).

-   **Frontend:**
    -   **[UI]** Xây dựng trang "Chi tiết tin tuyển dụng" để hiển thị đầy đủ thông tin về một công việc.
    -   **[UI]** Thêm nút "Ứng tuyển ngay" trên trang chi tiết tin tuyển dụng.
    -   **[UI]** Thiết kế và xây dựng một modal/dialog để hiển thị danh sách các CV đã tải lên của ứng viên khi nhấp vào nút "Ứng tuyển ngay".
    -   **[UI]** Tạo component `CVSelectionCard` cho mỗi CV trong danh sách lựa chọn.
    -   **[Logic]** Viết logic để gọi API lấy danh sách CV của người dùng và hiển thị trong modal.
    -   **[Logic]** Viết logic để gửi `cv_id` đã chọn đến API backend khi ứng viên xác nhận ứng tuyển.
    -   **[UI]** Hiển thị thông báo xác nhận ứng tuyển thành công hoặc lỗi (ví dụ: Toast notification).


## Ghi chú phát triển (Dev Notes)
- ... (Sẽ được bổ sung sau)
