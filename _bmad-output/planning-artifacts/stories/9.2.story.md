# Story 9.2: Bộ lọc tìm kiếm nâng cao

## Epic
Tìm kiếm & Ứng tuyển Nâng cao

## Mô tả
**Là một** Ứng viên, **tôi muốn** sử dụng các bộ lọc như mức lương, loại hình công việc (full-time/part-time), kỹ năng yêu cầu và phúc lợi, **để** tôi có thể tinh chỉnh kết quả tìm kiếm theo nhu cầu cá nhân.

## Tiêu chí chấp nhận (Acceptance Criteria)
1.  Người dùng phải có thể lọc tin tuyển dụng theo khoảng lương (ví dụ: từ X đến Y).
2.  Người dùng phải có thể lọc theo loại hình công việc (ví dụ: Full-time, Part-time, Remote, Hybrid, On-site).
3.  Người dùng phải có thể lọc theo kỹ năng yêu cầu (ví dụ: "Python", "React", "SQL").
4.  Người dùng phải có thể lọc theo các phúc lợi cụ thể (ví dụ: "Bảo hiểm", "Trợ cấp đi lại").
5.  Các bộ lọc phải có thể kết hợp với nhau và với tìm kiếm từ khóa/địa điểm cơ bản.
6.  Kết quả tìm kiếm phải được cập nhật ngay lập tức (hoặc sau khi nhấn nút "Áp dụng") khi người dùng thay đổi bộ lọc.
7.  Hệ thống phải hiển thị số lượng kết quả tìm thấy sau khi áp dụng bộ lọc.

## Nhiệm vụ (Tasks)

-   **Backend:**
    -   **[Database]** Đảm bảo bảng `job_descriptions` có các trường cần thiết cho việc lọc (ví dụ: `salary_min`, `salary_max`, `location_type` (đã có), `required_skills` (JSONB), `benefits` (JSONB hoặc TEXT[])). Nếu thiếu, cần tạo migration để bổ sung.
    -   **[API]** Nâng cấp API endpoint tìm kiếm tin tuyển dụng (`GET /api/v1/jobs/search/basic` hoặc tạo `GET /api/v1/jobs/search/advanced`) để chấp nhận các tham số lọc mới: `min_salary`, `max_salary`, `job_type`, `required_skills` (dạng list), `benefits` (dạng list).
    -   **[Logic]** Triển khai logic lọc trong service layer:
        -   Lọc theo khoảng lương.
        -   Lọc theo loại hình công việc (Full-time, Part-time, Remote, Hybrid, On-site).
        -   Lọc theo kỹ năng (kiểm tra sự tồn tại của kỹ năng trong trường `required_skills` của JD).
        -   Lọc theo phúc lợi.
    -   **[Performance]** Đảm bảo các truy vấn lọc hiệu quả, cân nhắc đánh index cho các trường cần thiết.

-   **Frontend:**
    -   **[UI]** Thiết kế và xây dựng khu vực bộ lọc trên trang tìm kiếm việc làm.
    -   **[UI]** Tạo các component điều khiển cho từng bộ lọc:
        -   Slider hoặc ô nhập liệu cho khoảng lương.
        -   Checkbox hoặc dropdown cho loại hình công việc.
        -   Input có gợi ý (autocomplete) hoặc multi-select cho kỹ năng.
        -   Checkbox hoặc multi-select cho phúc lợi.
    -   **[Logic]** Viết logic để thu thập các giá trị từ bộ lọc và xây dựng query parameters để gọi API tìm kiếm của backend.
    -   **[UI]** Xây dựng giao diện hiển thị các bộ lọc đang được áp dụng và cho phép người dùng xóa bỏ chúng.
    -   **[UI]** Hiển thị số lượng kết quả tìm thấy sau khi áp dụng bộ lọc.

## Ghi chú phát triển (Dev Notes)
- ... (Sẽ được bổ sung sau)
