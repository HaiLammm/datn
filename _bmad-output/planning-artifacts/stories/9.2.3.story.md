# Story 9.2.3: Benefits and Active Filters

## Status
in-progress

## Parent Story
Story 9.2: Advanced Search Filters

## Description
Allow users to filter jobs by benefits (e.g., Insurance, Training) and ensure robust handling of active/inactive jobs in search.

## Tasks

### Backend Implementation

- [x] **Task 1: Add Benefits Column**
    - [x] Add `benefits` (ARRAY(String)) to `job_descriptions` table.
    - [x] Add GIN index for efficient filtering.
    - [x] Update SQLALchemy model.

- [x] **Task 2: Update Schemas**
    - [x] Add `benefits` to `JobDescriptionBase`, `JobDescriptionCreate`, `JobDescriptionResponse`.
    - [x] Add `benefits` to `BasicJobSearchItemResponse`.

- [x] **Task 3: Update Search Service**
    - [x] Update `search_jobs_basic` to accept `benefits: List[str]`.
    - [x] Logic: `JobDescription.benefits.overlap(benefits)`.
    - [x] Ensure `is_active=True` is always applied (already is), but maybe allow filtering? No, public search should only show active.

### Frontend Implementation

- [x] **Task 4: Update Service & Actions**
    - [x] Update `searchJobsBasic` to include `benefits`.

- [x] **Task 5: Benefits Filter UI**
    - [x] Add "Benefits" section to `AdvancedFilters`.
    - [x] Use a list of Checkboxes for common benefits (Insurance, Training, Laptop, Bonus, Travel, Healthcare).
    - [x] Map these to English keys or Vietnamese keys?
        - DB should probably store standardized keys (e.g., `health-insurance`, `training`).
    - [x] Update `JobSearchPage` to handle `benefits` state.

## Technical Notes
- Predefined Benefits:
  - `health-insurance`: Bảo hiểm sức khỏe
  - `training`: Đào tạo
  - `laptop`: Cấp máy tính
  - `bonus`: Thưởng
  - `travel`: Du lịch
  - `leave`: Nghỉ phép
